<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λ‹¨κ³„λ³„ λ‚΄μ© κ΄€λ¦¬ - μ¤λμ ν• μΌ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .stage-preview {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        .stage-preview:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        .icon-selector {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
            max-height: 200px;
            overflow-y: auto;
        }
        .icon-option {
            padding: 0.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.5rem;
        }
        .icon-option:hover {
            border-color: #3b82f6;
            background-color: #dbeafe;
        }
        .icon-option.selected {
            border-color: #1d4ed8;
            background-color: #3b82f6;
            color: white;
        }
        .save-button {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        .save-button:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
    
    <!-- ν—¤λ” -->
    <div class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-tasks text-3xl"></i>
                    <div>
                        <h1 class="text-2xl font-bold">λ‹¨κ³„λ³„ λ‚΄μ© κ΄€λ¦¬</h1>
                        <p class="text-sm opacity-90">ν•™μƒνμ΄μ§€ "μ¤λμ ν• μΌ" λ‹¨κ³„ μ λ©, μ„¤λ…, μ•„μ΄μ½ μμ •</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="admin-v2.html" class="text-white hover:text-yellow-300 transition text-sm">
                        <i class="fas fa-arrow-left mr-2"></i>κ΄€λ¦¬μ λ©”μΈμΌλ΅
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- λ©”μΈ μ»¨ν…μΈ  -->
    <div class="container mx-auto px-4 py-8">
        
        <!-- μ„¤λ… μΉ΄λ“ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex items-start space-x-4">
                <div class="bg-blue-100 rounded-full p-3">
                    <i class="fas fa-info-circle text-blue-600 text-xl"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-2">μ‚¬μ© μ•λ‚΄</h2>
                    <p class="text-gray-600 mb-2">
                        μ΄ νμ΄μ§€μ—μ„λ” ν•™μƒ νμ΄μ§€μ <strong>"μ¤λμ ν• μΌ"</strong> μΉ΄λ“μ— ν‘μ‹λλ” 3λ‹¨κ³„μ λ‚΄μ©μ„ μμ •ν•  μ μμµλ‹λ‹¤.
                    </p>
                    <ul class="text-sm text-gray-500 space-y-1">
                        <li>β€Ά <strong>μ λ©</strong>: "1λ‹¨κ³„", "2λ‹¨κ³„", "3λ‹¨κ³„"μ κµµμ€ κΈ€μ”¨ λ¶€λ¶„</li>
                        <li>β€Ά <strong>μ„¤λ…</strong>: μ λ© μ•„λμ— ν‘μ‹λλ” μ„¤λ… ν…μ¤νΈ</li>
                        <li>β€Ά <strong>μ•„μ΄μ½</strong>: κ° λ‹¨κ³„ μ†μ— ν‘μ‹λλ” μ΄λ¨μ§€</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- λ‹¨κ³„ μ„¤μ • -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            
            <!-- 1λ‹¨κ³„ μ„¤μ • -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">
                        <i class="fas fa-circle text-blue-500 mr-2"></i>1λ‹¨κ³„ μ„¤μ •
                    </h3>
                </div>
                
                <!-- λ―Έλ¦¬λ³΄κΈ° -->
                <div class="stage-preview mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center bg-blue-100">
                                <span id="stage1-preview-icon" style="font-size: 1.2rem;">π™</span>
                            </div>
                            <div>
                                <h4 id="stage1-preview-title" class="font-bold text-gray-800" style="font-size: 0.6rem;">1λ‹¨κ³„: κΉ€λ°¥λ§κΈ°</h4>
                                <p id="stage1-preview-desc" class="text-gray-600" style="font-size: 0.5rem;">κΉ€λ°¥μ„ λ§μ•„λ³΄μ„Έμ” (+1ν¬μΈνΈ)</p>
                            </div>
                        </div>
                        <button class="px-2 py-1 rounded text-xs font-medium bg-blue-500 text-white" style="min-width: 3rem;">μ‹μ‘</button>
                    </div>
                </div>
                
                <!-- μ…λ ¥ νΌ -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ λ©</label>
                        <input type="text" id="stage1-title" 
                               value="1λ‹¨κ³„: κΉ€λ°¥λ§κΈ°"
                               placeholder="μ: 1λ‹¨κ³„: κΉ€λ°¥λ§κΈ°" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ„¤λ…</label>
                        <textarea id="stage1-desc" 
                                  rows="3" 
                                  placeholder="μ: κΉ€λ°¥μ„ λ§μ•„λ³΄μ„Έμ” (+1ν¬μΈνΈ)"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">κΉ€λ°¥μ„ λ§μ•„λ³΄μ„Έμ” (+1ν¬μΈνΈ)</textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ•„μ΄μ½ μ„ νƒ</label>
                        <div class="icon-selector" id="stage1-icons">
                            <!-- μ•„μ΄μ½ μµμ…λ“¤μ΄ μ—¬κΈ°μ— λ™μ  μƒμ„±λ©λ‹λ‹¤ -->
                        </div>
                        <input type="hidden" id="stage1-icon" value="π™">
                    </div>
                </div>
            </div>

            <!-- 2λ‹¨κ³„ μ„¤μ • -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">
                        <i class="fas fa-circle text-green-500 mr-2"></i>2λ‹¨κ³„ μ„¤μ •
                    </h3>
                </div>
                
                <!-- λ―Έλ¦¬λ³΄κΈ° -->
                <div class="stage-preview mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center bg-green-100">
                                <span id="stage2-preview-icon" style="font-size: 1.2rem;">π”</span>
                            </div>
                            <div>
                                <h4 id="stage2-preview-title" class="font-bold text-gray-800" style="font-size: 0.6rem;">2λ‹¨κ³„: κΉ€λ°¥μ°κΈ°</h4>
                                <p id="stage2-preview-desc" class="text-gray-600" style="font-size: 0.5rem;">κΉ€λ°¥μ„ μμκ² μ°μ–΄λ³΄μ„Έμ” (+1ν¬μΈνΈ)</p>
                            </div>
                        </div>
                        <button class="px-2 py-1 rounded text-xs font-medium bg-gray-300 text-gray-600" style="min-width: 3rem;">μ κΈ</button>
                    </div>
                </div>
                
                <!-- μ…λ ¥ νΌ -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ λ©</label>
                        <input type="text" id="stage2-title" 
                               value="2λ‹¨κ³„: κΉ€λ°¥μ°κΈ°"
                               placeholder="μ: 2λ‹¨κ³„: κΉ€λ°¥μ°κΈ°" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ„¤λ…</label>
                        <textarea id="stage2-desc" 
                                  rows="3" 
                                  placeholder="μ: κΉ€λ°¥μ„ μμκ² μ°μ–΄λ³΄μ„Έμ” (+1ν¬μΈνΈ)"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">κΉ€λ°¥μ„ μμκ² μ°μ–΄λ³΄μ„Έμ” (+1ν¬μΈνΈ)</textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ•„μ΄μ½ μ„ νƒ</label>
                        <div class="icon-selector" id="stage2-icons">
                            <!-- μ•„μ΄μ½ μµμ…λ“¤μ΄ μ—¬κΈ°μ— λ™μ  μƒμ„±λ©λ‹λ‹¤ -->
                        </div>
                        <input type="hidden" id="stage2-icon" value="π”">
                    </div>
                </div>
            </div>

            <!-- 3λ‹¨κ³„ μ„¤μ • -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-800">
                        <i class="fas fa-circle text-purple-500 mr-2"></i>3λ‹¨κ³„ μ„¤μ •
                    </h3>
                </div>
                
                <!-- λ―Έλ¦¬λ³΄κΈ° -->
                <div class="stage-preview mb-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center bg-purple-100">
                                <span id="stage3-preview-icon" style="font-size: 1.2rem;">β•</span>
                            </div>
                            <div>
                                <h4 id="stage3-preview-title" class="font-bold text-gray-800" style="font-size: 0.6rem;">3λ‹¨κ³„: κΉ€λ°¥μ¶”κ°€</h4>
                                <p id="stage3-preview-desc" class="text-gray-600" style="font-size: 0.5rem;">λ” λ§μ€ κΉ€λ°¥μ„ λ§λ“¤μ–΄λ³΄μ„Έμ” (+1ν¬μΈνΈ)</p>
                            </div>
                        </div>
                        <button class="px-2 py-1 rounded text-xs font-medium bg-gray-300 text-gray-600" style="min-width: 3rem;">μ κΈ</button>
                    </div>
                </div>
                
                <!-- μ…λ ¥ νΌ -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ λ©</label>
                        <input type="text" id="stage3-title" 
                               value="3λ‹¨κ³„: κΉ€λ°¥μ¶”κ°€"
                               placeholder="μ: 3λ‹¨κ³„: κΉ€λ°¥μ¶”κ°€" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ„¤λ…</label>
                        <textarea id="stage3-desc" 
                                  rows="3" 
                                  placeholder="μ: λ” λ§μ€ κΉ€λ°¥μ„ λ§λ“¤μ–΄λ³΄μ„Έμ” (+1ν¬μΈνΈ)"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">λ” λ§μ€ κΉ€λ°¥μ„ λ§λ“¤μ–΄λ³΄μ„Έμ” (+1ν¬μΈνΈ)</textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">μ•„μ΄μ½ μ„ νƒ</label>
                        <div class="icon-selector" id="stage3-icons">
                            <!-- μ•„μ΄μ½ μµμ…λ“¤μ΄ μ—¬κΈ°μ— λ™μ  μƒμ„±λ©λ‹λ‹¤ -->
                        </div>
                        <input type="hidden" id="stage3-icon" value="β•">
                    </div>
                </div>
            </div>
        </div>

        <!-- μ €μ¥ λ²„νΌ -->
        <div class="text-center">
            <button onclick="saveAllStages()" 
                    class="save-button text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105">
                <i class="fas fa-save mr-2"></i>λ¨λ“  λ‹¨κ³„ μ €μ¥
            </button>
        </div>
    </div>

    <!-- λ΅λ”© μ¤λ²„λ μ΄ -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white rounded-lg p-8 text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
                <p class="text-gray-700">μ €μ¥ μ¤‘μ…λ‹λ‹¤...</p>
            </div>
        </div>
    </div>

    <!-- μ„±κ³µ λ¨λ‹¬ -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-md w-full p-6">
                <div class="text-center">
                    <i class="fas fa-check-circle text-5xl text-green-500 mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">μ €μ¥ μ™„λ£!</h3>
                    <p class="text-gray-600 mb-6">λ¨λ“  λ‹¨κ³„ μ„¤μ •μ΄ μ„±κ³µμ μΌλ΅ μ €μ¥λμ—μµλ‹λ‹¤.<br>ν•™μƒ νμ΄μ§€μ—μ„ λ³€κ²½μ‚¬ν•­μ΄ μ‹¤μ‹κ°„μΌλ΅ λ°μλ©λ‹λ‹¤.</p>
                    <button onclick="closeSuccessModal()" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition">
                        ν™•μΈ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- μ—λ¬ λ¨λ‹¬ -->
    <div id="errorModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl max-w-md w-full p-6">
                <div class="text-center">
                    <i class="fas fa-exclamation-triangle text-5xl text-red-500 mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">μ €μ¥ μ‹¤ν¨</h3>
                    <p class="text-gray-600 mb-6" id="errorMessage">μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤. λ‹¤μ‹ μ‹λ„ν•΄μ£Όμ„Έμ”.</p>
                    <button onclick="closeErrorModal()" class="bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition">
                        ν™•μΈ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="static/supabase-config.js"></script>
    <script src="static/api-wrapper.js"></script>
    <script src="static/admin-stage-content.js"></script>
</body>
</html>